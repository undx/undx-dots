
* MUA Configuration

** Installation
*** Arch
    : yaourt -S neomutt notmuch isync pass gnupg

** secrets
  gpg --gen-key

** neomutt



** notmuch

: notmuch new; new=$(notmuch count tag:unread) ; [[ $new > 0 ]] && notify-send "$new unread messages"
: notmuch search "date:today and tag:unread"
: notmuch count 'path:personal/**'
: notmuch count 'path:personal/Inbox/** and tag:unread'
: NEW_PERSO=$(notmuch count 'path:personal/Inbox/** and tag:unread') 
: [ -n "$NEW_PERSO" || break
or 
: [ -n "$NEW_PERSO" && notify-send "HHGHG"

: notmuch search --format=json --output=files   'path:personal/** and tag:unread'
: notmuch search --format=json --output=summary 'path:personal/Inbox/** and tag:unread'
: notmuch search --format=json 'path:personal/** and tag:unread' | jq '.[] | .authors + ": " + .subject'

*** hooks

$DATABASEDIR/.notmuch/hooks/*

see https://notmuchmail.org/manpages/notmuch-hooks-5/

#+BEGIN_SRC sh
  #!/bin/sh¬
  new=$(notmuch count tag:unread)
  if [[ $new > 0 ]] ; then 
      summaries=$(notmuch search --limit=10 --format=json 'path:personal/** and tag:unread' | jq '.[] | .authors + ": " + .subject')
      notify-send mail "$new unread messages"¬$summaries
  fi
#+END_SRC


