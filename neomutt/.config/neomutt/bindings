### vim:ft=muttrc:fdm=marker
# -*- muttrc -*-

bind index g  noop
bind pager g  noop
bind index gg first-entry
bind pager gg top
bind index G  last-entry
bind pager G  bottom

bind index <space> collapse-thread
bind index   -     collapse-thread
bind index   _     collapse-all

bind index,pager \Ck sidebar-prev
bind index,pager \Cj sidebar-next
bind index,pager \Co sidebar-open
bind index,pager \Cp sidebar-prev-new
bind index,pager \Cn sidebar-next-new
bind index,pager B   sidebar-toggle-visible
# editor
bind editor <Tab>    complete-query
#
## Accounts selection
macro index,pager <f2> '<sync-mailbox><enter-command>source ~/.config/neomutt/accounts/home<enter><change-folder>!<enter>'
macro index,pager <f3> '<sync-mailbox><enter-command>source ~/.config/neomutt/accounts/work<enter><change-folder>!<enter>'
macro index,pager <f5> "<shell-escape>mbsync -a<enter>"           "run offlineimap to sync all mail"
#
# mailboxes are relative to folder variable
# folders that should be checked regularly for new mail and showed in sidebar
macro index gi "<change-folder>$my_spool<enter>"   "Go to Inbox"
macro index ga "<change-folder>$my_archive<enter>" "Go to Archive"
macro index gs "<change-folder>$my_sent<enter>"    "Go to Sent"
macro index gd "<change-folder>$my_drafts<enter>"  "Go to Drafts"
macro index gt "<change-folder>$my_trash<enter>"   "Go to Trash"
#
macro generic     ,r ":source ~/.config/neomutt/neomuttrc<enter>" "reload configuration"
macro index,pager ,f  "<change-folder>=famille<enter>"    "Go to famille"
macro index,pager ,x  "<change-folder>=search<enter>"     "Go to searches"
#
bind attach <space>  view-mailcap # view, god dammit!

## notmuch tools
#
#
#
#macro index       ,m "<limit>!(~N|~O)<enter><collapse-all><limit>all<enter>"
#macro index s "<pipe-message>cat > ~/desktop/"  "save message as"
#macro attach S  "<save-entry><kill-line>~/Desktop/<enter>y" "Save to desktop"
#macro index,pager S "<save-message>=[Gmail]/Spam<enter>"      "mark message as spam"
#macro index,pager d "<enter-command>set trash=\"imaps://imap.googlemail.com/[gmail]/bin\"\n <delete-message>" "gmail delete message"
#macro index,pager y "<enter-command>unset trash\n <delete-message>" "Gmail archive message"

# copy/move dialogs
#macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
#macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"
